<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Return of the Clustering</title>

		<link rel="stylesheet" href="css/reveal.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="stylesheet" href="css/theme/long-ago-faraway.css">

	</head>
	<body>
		<div class="reveal">
			<div class="slides">
        <section>
          <h1>Return <small>of the</small> Clustering</h1>
          <p>&nbsp;</p>
          <p>use &larr;&uarr;&darr;&rarr; or &lt;space&gt;</p>
        </section>

        <section>
          <h2>"Where's the links?"</h2>
          <p><a href="https://socketwench.github.io/reurn-of-the-clustering/#/">socketwench.github.io/reurn-of-the-clustering</a></p>
        </section>

        <section>
          <section data-transition="none" data-background-transition="none" data-background="images/socketwench1.png" data-background-size="contain">
            &nbsp;
          </section>
          <section data-transition="none" data-background-transition="none" data-background="images/socketwench2.png" data-background-size="contain">
            &nbsp;
          </section>
          <section data-transition="none" data-background-transition="none" data-background="images/socketwench3.png" data-background-size="contain">
            &nbsp;
          </section>
					<section data-transition="none" data-background-transition="none" data-background="images/socketwench4.png" data-background-size="contain">
            &nbsp;
          </section>
					<section data-transition="none" data-background-transition="none" data-background="images/socketwench5.png" data-background-size="contain">
            &nbsp;
          </section>
          <section data-background="images/t7-background.jpg" class="teamten7">
            <img src="images/TEN7-logo.png" />
            <p>We create and care for<br />Drupal-powered websites.</p>
            <p><a href="https://twitter.com/TEN7">@TEN7</a><br /><a href="mailto:hi@ten7.com">hi@ten7.com</a></p>
          </section>

          <section  data-transition="none" data-background-transition="none" data-background="images/trilogy1.png" data-background-size="contain">
            &nbsp;
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/trilogy2.png" data-background-size="contain">
            &nbsp;
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/trilogy3.png" data-background-size="contain">
            &nbsp;
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/trilogy4.png" data-background-size="contain">
            <a href="https://www.youtube.com/watch?v=mQSQH8tT9bA">
              <h2>Ride the Whale</h2>
              <p>Docker for Drupalists</p>
            </a>
            <a href="https://www.youtube.com/watch?v=2K4B48hrYfE" class="fragment">
              <h2>Avoid Deep Hurting!</h2>
              <p>Deployments beyond git</p>
            </a>
          </section>
        </section>

        <section>
          <section>
            <h1>Huggable servers</h1>
          </section>
          <section data-transition="none">
            <img src="images/huggableServers1.png" />
          </section>
          <section data-transition="none">
            <img src="images/huggableServers2.png" />
          </section>
          <section data-transition="none">
            <img src="images/huggableServers3.png" />
          </section>
          <section data-transition="none">
            <img src="images/huggableServers4.png" />
          </section>
          <section data-transition="none">
            <img src="images/huggableServers5.png" />
          </section>
          <section data-transition="none">
            <img src="images/huggableServers6.png" />
          </section>
          <section data-transition="none">
            <img src="images/huggableServers7.png" />
          </section>
          <section data-transition="none">
            <img src="images/huggableServers8.png" />
          </section>
          <section>
            <h2>Per-client stacks</h2>
            <p class="fragment">Isolation between clients</p>
            <p class="fragment">Allow different services, versions</p>
          </section>
          <section>
            <h2>Repeatability</h2>
            <p class="fragment">Must be stood-up quickly</p>
            <p class="fragment">Repeatable from template</p>
          </section>
          <section>
            <h2>Reduce costs</h2>
            <p class="fragment">Existing cluster expensive</p>
          </section>
          <section>
            <h2>Less "huggable"</h2>
            <p class="fragment">Configured only using automation</p>
            <p class="fragment">Avoid direct changes via human-hands!</p>
          </section>
          <section data-transition="none">
            <img src="images/lessHuggable1.png" />
          </section>
          <section data-transition="none">
            <img src="images/lessHuggable2.png" />
          </section>
          <section data-transition="none">
            <img src="images/lessHuggable3.png" />
          </section>
          <section data-transition="none">
            <img src="images/lessHuggable4.png" />
          </section>
          <section data-transition="none">
            <img src="images/lessHuggable5.png" />
          </section>
          <section data-transition="none">
            <img src="images/lessHuggable6.png" />
          </section>
          <section data-transition="none">
            <img src="images/lessHuggable7.png" />
          </section>
          <section data-transition="none">
            <img src="images/lessHuggable8.png" />
          </section>
          <section data-transition="none">
            <img src="images/lessHuggable9.png" />
          </section>
          <section>
            <h2>Manual steps</h2>
            <p class="fragment">Creation of servers on VPS</p>
            <p class="fragment">Adding admin user, SSH key, initial utils</p>
          </section>
          <section data-transition="none">
            <img src="images/soMuchTime1.png" />
          </section>
          <section data-transition="none">
            <img src="images/soMuchTime2.png" />
          </section>
          <section data-transition="none">
            <img src="images/soMuchTime3.png" />
          </section>
          <section>
            <h2>What's missing?</h2>
            <p class="fragment">API integration with VPS</p>
            <p class="fragment">Was under development at the time</p>
          </section>
          <section data-transition="none" data-background-transition="none" data-background="images/notTheSame1.png" data-background-size="contain">
            <h2>Did it match dev?</h2>
            <p class="fragment">Well...<span class="fragment">mostly.</span></p>
            <p class="fragment">Versions and config as close as possible</p>
          </section>
          <section data-transition="none" data-background-transition="none" data-background="images/notTheSame2.png" data-background-size="contain">
            <h2>Did it match dev?</h2>
            <p class="">Well...<span class="">mostly.</span></p>
            <p class="">Versions and config as close as possible</p>
          </section>
        </section>

        <section>
          <section data-transition="none">
            <img src="images/dockerInProd1.png" />
          </section>
          <section data-transition="none">
            <img src="images/dockerInProd2.png" />
          </section>
          <section data-transition="none">
            <img src="images/dockerInProd3.png" />
          </section>
          <section data-transition="none">
            <img src="images/dockerInProd4.png" />
          </section>
          <section data-transition="none">
            <img src="images/dockerInProd5.png" />
          </section>
          <section data-transition="none">
            <img src="images/dockerInProd6.png" />
          </section>
          <section data-transition="none">
            <img src="images/dockerInProd7.png" />
          </section>
          <section>
            <h1>Docker in Production?</h1>
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/itCantBeThatHard1.png" data-background-size="contain">
            &nbsp;
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/itCantBeThatHard2.png" data-background-size="contain">
            &nbsp;
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/itCantBeThatHard3.png" data-background-size="contain">
            &nbsp;
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/itCantBeThatHard4.png" data-background-size="contain">
            &nbsp;
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/itCantBeThatHard5.png" data-background-size="contain">
            &nbsp;
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/itCantBeThatHard6.png" data-background-size="contain">
            &nbsp;
          </section>
          <section  data-transition="none" data-background-transition="none" data-background="images/itCantBeThatHard7.png" data-background-size="contain">
            &nbsp;
          </section>
          <section data-transition="none" data-background-transition="none" data-background="images/dockersecurity1.png" data-background-size="contain">
            <h2>Docker Security</h2>
            <p class="fragment">Docker maps users between host and container</p>
            <p class="fragment">Most containers run...<span class="fragment">as root</span></p>
          </section>
          <section data-transition="none" data-background-transition="none" data-background="images/dockersecurity2.png" data-background-size="contain">
            <h2>Docker Security</h2>
            <p>Docker maps users between host and container</p>
            <p>Most containers run...<span>as root</span></p>
          </section>
          <section data-transition="none" data-background-transition="none" data-background="images/dockersecurity3.png" data-background-size="contain">
            <h2>Docker Security</h2>
            <p>Docker maps users between host and container</p>
            <p>Most containers run...<span>as root</span></p>
          </section>
          <section>
            <h2>Passing config</h2>
            <p class="fragment">Avoid Compose-style environment variables</p>
            <p class="fragment">Use <a href="https://docs.docker.com/engine/swarm/secrets/">Secrets</a> instead</p>
          </section>
          <section data-transition="none">
            <img src="images/multipledockerhosts01.png" />
          </section>
          <section data-transition="none">
            <img src="images/multipledockerhosts02.png" />
          </section>
          <section data-transition="none">
            <img src="images/multipledockerhosts03.png" />
          </section>
          <section data-transition="none">
            <img src="images/multipledockerhosts04.png" />
          </section>
          <section data-transition="none">
            <img src="images/multipledockerhosts05.png" />
          </section>
          <section data-transition="none">
            <img src="images/multipledockerhosts06.png" />
          </section>
          <section data-transition="none">
            <img src="images/multipledockerhosts07.png" />
          </section>
          <section>
            <h2>Single-node Docker</h2>
            <p class="fragment">Runs all containers on the same system</p>
            <p class="fragment">Easy, but scaling is vertical only</p>
          </section>
          <section>
            <h2>orchestration</h2>
            <p class="fragment">Coordinates hosts to act as one</p>
            <p class="fragment">Deploy instances, distribute load, deliver resources</p>
          </section>
          <section>
            <h2>Swarm mode</h2>
            <p class="fragment">Docker's own orchestrator</p>
            <p class="fragment">Built-in, free to use</p>
          </section>
          <section data-transition="none">
            <img src="images/swarm01.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm02.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm03.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm04.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm05.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm06.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm07.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm08.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm09.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm10.png" />
          </section>
          <section data-transition="none">
            <img src="images/swarm11.png" />
          </section>
          <section>
            <h2>Lack of hosting choice</h2>
            <p class="fragment">Docker cloud was expensive <span class="fragment">(and discontinued)</span></p>
            <p class="fragment">Self-host, sort out LB and storage</p>
          </section>
          <section>
            <h2>Too "uncontrolled"</h2>
            <p class="fragment">Containers only managable unit</p>
            <p class="fragment">Internal LB creates Drupal problems</a>
          </section>
        </section>
        <section>
          <section data-transition="none">
            <img src="images/whatsThis1.png" />
          </section>
          <section data-transition="none">
            <img src="images/whatsThis2.png" />
          </section>
          <section data-transition="none">
            <img src="images/whatsThis3.png" />
          </section>
          <section data-transition="none">
            <img src="images/whatsThis4.png" />
          </section>
          <section data-transition="none">
            <img src="images/whatsThis5.png" />
          </section>
          <section>
            <h1>Koo-ber-WHAT-ees?</h1>
          </section>
          <section>
            <h2>Kubernetes</h2>
            <p class="fragment">Open-source container orchestrator</p>
            <p class="fragment">Created by Google</a>
          </section>
          <section>
            <h2>Engine agnostic</h2>
            <p class="fragment">Docker is default, but others supported</p>
            <p class="fragment">insulates you from industry changes</p>
          </section>
          <section>
            <h2>Deployment</h2>
            <p class="fragment">Imperitive CLI, or Declaritive YAML</p>
            <p class="fragment">YAML can be pushed and pulled like git</p>
          </section>
          <section>
            <h2>Control!</h2>
            <p class="fragment"><em>Pods</em> only one of many managable objects</p>
            <p class="fragment">Tailor k8s to your app, not the other way around</p>
          </section>
          <!--
            Comic here?
            Something breifly laying out k8s's different model
            Focus on only the parts we need, not everything.
          -->
          <section data-transition="none" data-background-transition="fade" data-background="images/this-much-devops.jpg" data-background-size="contain">
            &nbsp;
          </section>
        </section>

        <section>
          <section>
            This is <code>inline code</code>.
          </section>
          <section>
            <pre class="shell"><code>$ free -h</code></pre>
            <pre class="shell fragment"><code>        total    used    free   shared  buff/cache   available
Mem:     15Gi   3.8Gi   4.1Gi    1.7Gi       7.7Gi         9Gi
Swap:    31Gi    77Mi   31Gi</code></pre>
          <small class="fragment">(Scroll right)</small>
          </section>
        </section>

        <section>
          <section>
            <h2>Special thanks</h2>
            <p class="fragment">Drupalcamp Florida</p>
            <p class="fragment"><a href="https://ten7.com/">TEN7</a></p>
            <p class="fragment"><a href="https://www.patreon.com/socketwench">patreon.com/socketwench</a></p>
          </section>

          <section data-background-transition="none" data-background="images/thankYou.png" data-background-size="contain">
            <h1>Thank you!</h1>
            <p>socketwench.github.io/return-of-the-clustering</p>
            <p>&nbsp;</p>
          </section>
        </section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			Reveal.initialize({
        history: true,
        controls: false,
        progress: true,
        center: true,
        width: 1024,
        height: 763,
        transition: 'slide',

				dependencies: [
				  { src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
